-- Generated by python script 'generate_coeficient_expressions.py'
-- 2024-11-18

local lib = {}
lib._get_coefficients = {}

lib._get_coefficients[1] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -u_0 + u_1
    c_1.y = -v_0 + v_1
    return {c_0, c_1}
end


lib._get_coefficients[2] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local u_2, v_2 = control_points[3].x, control_points[3].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -2*u_0 + 2*u_1
    c_1.y = -2*v_0 + 2*v_1
    local c_2 = {}
    c_2.x = u_0 - 2*u_1 + u_2
    c_2.y = v_0 - 2*v_1 + v_2
    return {c_0, c_1, c_2}
end


lib._get_coefficients[3] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local u_2, v_2 = control_points[3].x, control_points[3].y
    local u_3, v_3 = control_points[4].x, control_points[4].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -3*u_0 + 3*u_1
    c_1.y = -3*v_0 + 3*v_1
    local c_2 = {}
    c_2.x = 3*u_0 - 6*u_1 + 3*u_2
    c_2.y = 3*v_0 - 6*v_1 + 3*v_2
    local c_3 = {}
    c_3.x = -u_0 + 3*u_1 - 3*u_2 + u_3
    c_3.y = -v_0 + 3*v_1 - 3*v_2 + v_3
    return {c_0, c_1, c_2, c_3}
end


lib._get_coefficients[4] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local u_2, v_2 = control_points[3].x, control_points[3].y
    local u_3, v_3 = control_points[4].x, control_points[4].y
    local u_4, v_4 = control_points[5].x, control_points[5].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -4*u_0 + 4*u_1
    c_1.y = -4*v_0 + 4*v_1
    local c_2 = {}
    c_2.x = 6*u_0 - 12*u_1 + 6*u_2
    c_2.y = 6*v_0 - 12*v_1 + 6*v_2
    local c_3 = {}
    c_3.x = -4*u_0 + 12*u_1 - 12*u_2 + 4*u_3
    c_3.y = -4*v_0 + 12*v_1 - 12*v_2 + 4*v_3
    local c_4 = {}
    c_4.x = u_0 - 4*u_1 + 6*u_2 - 4*u_3 + u_4
    c_4.y = v_0 - 4*v_1 + 6*v_2 - 4*v_3 + v_4
    return {c_0, c_1, c_2, c_3, c_4}
end


lib._get_coefficients[5] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local u_2, v_2 = control_points[3].x, control_points[3].y
    local u_3, v_3 = control_points[4].x, control_points[4].y
    local u_4, v_4 = control_points[5].x, control_points[5].y
    local u_5, v_5 = control_points[6].x, control_points[6].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -5*u_0 + 5*u_1
    c_1.y = -5*v_0 + 5*v_1
    local c_2 = {}
    c_2.x = 10*u_0 - 20*u_1 + 10*u_2
    c_2.y = 10*v_0 - 20*v_1 + 10*v_2
    local c_3 = {}
    c_3.x = -10*u_0 + 30*u_1 - 30*u_2 + 10*u_3
    c_3.y = -10*v_0 + 30*v_1 - 30*v_2 + 10*v_3
    local c_4 = {}
    c_4.x = 5*u_0 - 20*u_1 + 30*u_2 - 20*u_3 + 5*u_4
    c_4.y = 5*v_0 - 20*v_1 + 30*v_2 - 20*v_3 + 5*v_4
    local c_5 = {}
    c_5.x = -u_0 + 5*u_1 - 10*u_2 + 10*u_3 - 5*u_4 + u_5
    c_5.y = -v_0 + 5*v_1 - 10*v_2 + 10*v_3 - 5*v_4 + v_5
    return {c_0, c_1, c_2, c_3, c_4, c_5}
end


lib._get_coefficients[6] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local u_2, v_2 = control_points[3].x, control_points[3].y
    local u_3, v_3 = control_points[4].x, control_points[4].y
    local u_4, v_4 = control_points[5].x, control_points[5].y
    local u_5, v_5 = control_points[6].x, control_points[6].y
    local u_6, v_6 = control_points[7].x, control_points[7].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -6*u_0 + 6*u_1
    c_1.y = -6*v_0 + 6*v_1
    local c_2 = {}
    c_2.x = 15*u_0 - 30*u_1 + 15*u_2
    c_2.y = 15*v_0 - 30*v_1 + 15*v_2
    local c_3 = {}
    c_3.x = -20*u_0 + 60*u_1 - 60*u_2 + 20*u_3
    c_3.y = -20*v_0 + 60*v_1 - 60*v_2 + 20*v_3
    local c_4 = {}
    c_4.x = 15*u_0 - 60*u_1 + 90*u_2 - 60*u_3 + 15*u_4
    c_4.y = 15*v_0 - 60*v_1 + 90*v_2 - 60*v_3 + 15*v_4
    local c_5 = {}
    c_5.x = -6*u_0 + 30*u_1 - 60*u_2 + 60*u_3 - 30*u_4 + 6*u_5
    c_5.y = -6*v_0 + 30*v_1 - 60*v_2 + 60*v_3 - 30*v_4 + 6*v_5
    local c_6 = {}
    c_6.x = u_0 - 6*u_1 + 15*u_2 - 20*u_3 + 15*u_4 - 6*u_5 + u_6
    c_6.y = v_0 - 6*v_1 + 15*v_2 - 20*v_3 + 15*v_4 - 6*v_5 + v_6
    return {c_0, c_1, c_2, c_3, c_4, c_5, c_6}
end


lib._get_coefficients[7] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local u_2, v_2 = control_points[3].x, control_points[3].y
    local u_3, v_3 = control_points[4].x, control_points[4].y
    local u_4, v_4 = control_points[5].x, control_points[5].y
    local u_5, v_5 = control_points[6].x, control_points[6].y
    local u_6, v_6 = control_points[7].x, control_points[7].y
    local u_7, v_7 = control_points[8].x, control_points[8].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -7*u_0 + 7*u_1
    c_1.y = -7*v_0 + 7*v_1
    local c_2 = {}
    c_2.x = 21*u_0 - 42*u_1 + 21*u_2
    c_2.y = 21*v_0 - 42*v_1 + 21*v_2
    local c_3 = {}
    c_3.x = -35*u_0 + 105*u_1 - 105*u_2 + 35*u_3
    c_3.y = -35*v_0 + 105*v_1 - 105*v_2 + 35*v_3
    local c_4 = {}
    c_4.x = 35*u_0 - 140*u_1 + 210*u_2 - 140*u_3 + 35*u_4
    c_4.y = 35*v_0 - 140*v_1 + 210*v_2 - 140*v_3 + 35*v_4
    local c_5 = {}
    c_5.x = -21*u_0 + 105*u_1 - 210*u_2 + 210*u_3 - 105*u_4 + 21*u_5
    c_5.y = -21*v_0 + 105*v_1 - 210*v_2 + 210*v_3 - 105*v_4 + 21*v_5
    local c_6 = {}
    c_6.x = 7*u_0 - 42*u_1 + 105*u_2 - 140*u_3 + 105*u_4 - 42*u_5 + 7*u_6
    c_6.y = 7*v_0 - 42*v_1 + 105*v_2 - 140*v_3 + 105*v_4 - 42*v_5 + 7*v_6
    local c_7 = {}
    c_7.x = -u_0 + 7*u_1 - 21*u_2 + 35*u_3 - 35*u_4 + 21*u_5 - 7*u_6 + u_7
    c_7.y = -v_0 + 7*v_1 - 21*v_2 + 35*v_3 - 35*v_4 + 21*v_5 - 7*v_6 + v_7
    return {c_0, c_1, c_2, c_3, c_4, c_5, c_6, c_7}
end


lib._get_coefficients[8] = function(control_points)
    local u_0, v_0 = control_points[1].x, control_points[1].y
    local u_1, v_1 = control_points[2].x, control_points[2].y
    local u_2, v_2 = control_points[3].x, control_points[3].y
    local u_3, v_3 = control_points[4].x, control_points[4].y
    local u_4, v_4 = control_points[5].x, control_points[5].y
    local u_5, v_5 = control_points[6].x, control_points[6].y
    local u_6, v_6 = control_points[7].x, control_points[7].y
    local u_7, v_7 = control_points[8].x, control_points[8].y
    local u_8, v_8 = control_points[9].x, control_points[9].y
    local c_0 = {}
    c_0.x = u_0
    c_0.y = v_0
    local c_1 = {}
    c_1.x = -8*u_0 + 8*u_1
    c_1.y = -8*v_0 + 8*v_1
    local c_2 = {}
    c_2.x = 28*u_0 - 56*u_1 + 28*u_2
    c_2.y = 28*v_0 - 56*v_1 + 28*v_2
    local c_3 = {}
    c_3.x = -56*u_0 + 168*u_1 - 168*u_2 + 56*u_3
    c_3.y = -56*v_0 + 168*v_1 - 168*v_2 + 56*v_3
    local c_4 = {}
    c_4.x = 70*u_0 - 280*u_1 + 420*u_2 - 280*u_3 + 70*u_4
    c_4.y = 70*v_0 - 280*v_1 + 420*v_2 - 280*v_3 + 70*v_4
    local c_5 = {}
    c_5.x = -56*u_0 + 280*u_1 - 560*u_2 + 560*u_3 - 280*u_4 + 56*u_5
    c_5.y = -56*v_0 + 280*v_1 - 560*v_2 + 560*v_3 - 280*v_4 + 56*v_5
    local c_6 = {}
    c_6.x = 28*u_0 - 168*u_1 + 420*u_2 - 560*u_3 + 420*u_4 - 168*u_5 + 28*u_6
    c_6.y = 28*v_0 - 168*v_1 + 420*v_2 - 560*v_3 + 420*v_4 - 168*v_5 + 28*v_6
    local c_7 = {}
    c_7.x = -8*u_0 + 56*u_1 - 168*u_2 + 280*u_3 - 280*u_4 + 168*u_5 - 56*u_6 + 8*u_7
    c_7.y = -8*v_0 + 56*v_1 - 168*v_2 + 280*v_3 - 280*v_4 + 168*v_5 - 56*v_6 + 8*v_7
    local c_8 = {}
    c_8.x = u_0 - 8*u_1 + 28*u_2 - 56*u_3 + 70*u_4 - 56*u_5 + 28*u_6 - 8*u_7 + u_8
    c_8.y = v_0 - 8*v_1 + 28*v_2 - 56*v_3 + 70*v_4 - 56*v_5 + 28*v_6 - 8*v_7 + v_8
    return {c_0, c_1, c_2, c_3, c_4, c_5, c_6, c_7, c_8}
end


--- @param control_points table<integer, Vector>
--- @return table<integer, Vector>
function lib.get_coefficients(control_points)
    local degree = #control_points - 1
    if degree > 8 then
        error("Too many control points, max is 9")
    elseif degree < 1 then
        error("Too few control points, at least 2 are required")
    end

    return lib._get_coefficients[degree](control_points)
    end

return lib